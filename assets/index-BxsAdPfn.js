var Xe=Object.defineProperty;var et=(d,x,a)=>x in d?Xe(d,x,{enumerable:!0,configurable:!0,writable:!0,value:a}):d[x]=a;var u=(d,x,a)=>(et(d,typeof x!="symbol"?x+"":x,a),a);import{j as e,L as C,r as m,i as P,b as i,S as h,a as I,F as ee,f as ye,M as Z,c as me,d as Q,e as W,g as Ge,C as tt,B as at,h as st,k as ot,p as rt,l as nt,m as it,n as lt,o as ct,N as He,E as Ye,q as Ke,s as Se,t as dt,R as ht,u as mt,v as Ue,w as ut,x as xt,y as Ne,z as xe,A as gt,D as jt,G as pt,O as ft,H as Ct,I as bt,J as vt,K as Nt,P as St,Q as $}from"./vendor-DXkBObq9.js";(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();const L="https://github.com/Santy1011/github-pages.git/assets/logoempresa-CLJ3EePz.png",It=()=>e.jsxs("div",{children:[e.jsx("header",{children:e.jsxs("div",{className:"logo",children:[e.jsx("link",{to:"/"}),e.jsx("img",{src:L,alt:"Logo",width:100}),e.jsxs("ul",{className:"info",children:[e.jsx(C,{to:"/",children:e.jsx("li",{children:"Inicio"})}),e.jsx(C,{to:"/contacto",children:e.jsx("li",{children:"Contacto"})})]}),e.jsx("ul",{children:e.jsx("div",{className:"login",children:e.jsx("li",{children:e.jsx(C,{to:"./login",children:"Iniciar sesion"})})})})]})}),e.jsxs("div",{className:"cuerp",children:[e.jsx("img",{className:"initl",src:L,alt:"Logo de la empresa"}),e.jsx("div",{className:"contp",children:e.jsx("div",{className:"textp",children:e.jsxs("p",{className:"pcuerp",children:["¿Que es SOFACTO? ",e.jsx("br",{}),"SOFACTO. es el software definitivo para simplificar tus procesos de facturación, control ",e.jsx("br",{}),"de inventario y registro de ventas. Con una interfaz amigable y de fácil uso, SOFACTO. ",e.jsx("br",{}),"te permite automatizar tus tareas diarias y enfocarte en lo que realmente importa: hacer crecer tu negocio.",e.jsx("br",{}),e.jsx("br",{}),"¿Te preocupa la complejidad del proceso de facturación?",e.jsx("br",{}),e.jsx("br",{}),"Con este software podrás generar facturas de manera rápida y sencilla, sin tener que preocuparte por errores o demoras."]})})})]}),e.jsx("div",{children:e.jsx("footer",{children:e.jsxs("div",{className:"contacto",children:[e.jsx("h3",{children:"Contacto"}),e.jsx("h4",{className:"inf",children:"Correo electrónico: johancasilimas@gmail.com"}),e.jsx("h4",{className:"inf",children:"Teléfono: 3112599859"}),e.jsx("h4",{className:"inf",children:"Dirección: Plaza paloquemao - Sección de quesos"})]})})})]}),yt=d=>e.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...d,children:[e.jsx("path",{d:"M21.25 9.14969C18.94 5.51969 15.56 3.42969 12 3.42969C10.22 3.42969 8.49 3.94969 6.91 4.91969C5.33 5.89969 3.91 7.32969 2.75 9.14969C1.75 10.7197 1.75 13.2697 2.75 14.8397C5.06 18.4797 8.44 20.5597 12 20.5597C13.78 20.5597 15.51 20.0397 17.09 19.0697C18.67 18.0897 20.09 16.6597 21.25 14.8397C22.25 13.2797 22.25 10.7197 21.25 9.14969ZM12 16.0397C9.76 16.0397 7.96 14.2297 7.96 11.9997C7.96 9.76969 9.76 7.95969 12 7.95969C14.24 7.95969 16.04 9.76969 16.04 11.9997C16.04 14.2297 14.24 16.0397 12 16.0397Z",fill:"currentColor"}),e.jsx("path",{d:"M11.9984 9.14062C10.4284 9.14062 9.14844 10.4206 9.14844 12.0006C9.14844 13.5706 10.4284 14.8506 11.9984 14.8506C13.5684 14.8506 14.8584 13.5706 14.8584 12.0006C14.8584 10.4306 13.5684 9.14062 11.9984 9.14062Z",fill:"currentColor"})]}),Pt=d=>e.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...d,children:[e.jsx("path",{d:"M21.2714 9.17834C20.9814 8.71834 20.6714 8.28834 20.3514 7.88834C19.9814 7.41834 19.2814 7.37834 18.8614 7.79834L15.8614 10.7983C16.0814 11.4583 16.1214 12.2183 15.9214 13.0083C15.5714 14.4183 14.4314 15.5583 13.0214 15.9083C12.2314 16.1083 11.4714 16.0683 10.8114 15.8483C10.8114 15.8483 9.38141 17.2783 8.35141 18.3083C7.85141 18.8083 8.01141 19.6883 8.68141 19.9483C9.75141 20.3583 10.8614 20.5683 12.0014 20.5683C13.7814 20.5683 15.5114 20.0483 17.0914 19.0783C18.7014 18.0783 20.1514 16.6083 21.3214 14.7383C22.2714 13.2283 22.2214 10.6883 21.2714 9.17834Z",fill:"currentColor"}),e.jsx("path",{d:"M14.0206 9.98062L9.98062 14.0206C9.47062 13.5006 9.14062 12.7806 9.14062 12.0006C9.14062 10.4306 10.4206 9.14062 12.0006 9.14062C12.7806 9.14062 13.5006 9.47062 14.0206 9.98062Z",fill:"currentColor"}),e.jsx("path",{d:"M18.25 5.74969L14.86 9.13969C14.13 8.39969 13.12 7.95969 12 7.95969C9.76 7.95969 7.96 9.76969 7.96 11.9997C7.96 13.1197 8.41 14.1297 9.14 14.8597L5.76 18.2497H5.75C4.64 17.3497 3.62 16.1997 2.75 14.8397C1.75 13.2697 1.75 10.7197 2.75 9.14969C3.91 7.32969 5.33 5.89969 6.91 4.91969C8.49 3.95969 10.22 3.42969 12 3.42969C14.23 3.42969 16.39 4.24969 18.25 5.74969Z",fill:"currentColor"}),e.jsx("path",{d:"M14.8581 11.9981C14.8581 13.5681 13.5781 14.8581 11.9981 14.8581C11.9381 14.8581 11.8881 14.8581 11.8281 14.8381L14.8381 11.8281C14.8581 11.8881 14.8581 11.9381 14.8581 11.9981Z",fill:"currentColor"}),e.jsx("path",{d:"M21.7689 2.22891C21.4689 1.92891 20.9789 1.92891 20.6789 2.22891L2.22891 20.6889C1.92891 20.9889 1.92891 21.4789 2.22891 21.7789C2.37891 21.9189 2.56891 21.9989 2.76891 21.9989C2.96891 21.9989 3.15891 21.9189 3.30891 21.7689L21.7689 3.30891C22.0789 3.00891 22.0789 2.52891 21.7689 2.22891Z",fill:"currentColor"})]}),Et=()=>{const[d,x]=m.useState(!1),[a,o]=m.useState({correo:"",contrasena:""}),s=()=>x(!d),l=(N,D)=>{const{value:O}=N.target;o({...a,[D]:O})},p=async N=>{N.preventDefault();try{const{correo:D,contrasena:O}=a;console.log("Iniciando sesión...");const E=await fetch("http://localhost:3000/login/logeo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({correo:D,contrasena:O})});if(E.ok){console.log("Inicio de sesión exitoso");const w=(await E.json()).usuario.IdCargo;localStorage.setItem("user",JSON.stringify({formData:a}));let v="/menu";w==="Administrador"?v="/menuadmin":w==="Empleado"&&(v="/menuemple"),h.fire({icon:"success",title:"¡Bienvenido de vuelta!",text:`Estimado: ${w}`,confirmButtonText:"Ok"}).then(()=>{window.location.href=v})}else console.error("Credenciales incorrectas"),h.fire({icon:"error",title:"¡Error!",text:"Credenciales incorrectas",confirmButtonText:"Ok"})}catch(D){console.error("Error al iniciar sesión:",D)}};return e.jsxs("div",{children:[e.jsx("header",{children:e.jsx("div",{className:"logo",children:e.jsx(C,{to:"/",children:e.jsx("img",{src:L,alt:"Logo",width:100})})})}),e.jsx("div",{className:"fondo",children:e.jsx("div",{className:"registro",children:e.jsxs("form",{className:"form-inicio0",id:"login-form",onSubmit:p,children:[e.jsx("h1",{children:"Iniciar sesión"}),e.jsx(P,{isRequired:!0,type:"email",label:"Ingrese su correo",className:"respuesta",onChange:N=>l(N,"correo"),name:"correo"}),e.jsx(P,{label:"Contraseña",variant:"contraseña",placeholder:"Ingrese su contraseña",endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:s,children:d?e.jsx(Pt,{className:"text-2xl text-default-400 pointer-events-none"}):e.jsx(yt,{className:"text-2xl text-default-400 pointer-events-none"})}),type:d?"text":"password",className:"respuesta",onChange:N=>l(N,"contrasena"),name:"contrasena"}),e.jsx("a",{href:"/contrasena",children:"¿Olvidaste tu contraseña?"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(i,{color:"primary",variant:"ghost",type:"submit",children:"Iniciar sesión"}),e.jsx("br",{})]})})})]})},Ft=()=>{const[d,x]=m.useState({IdTipo_identificacion:"",IdUsuario:"",Correo:"",Contrasena:"",Verificar_Contrasena:"",IdCargo:""}),a=(s,l)=>{const{value:p}=s.target;x({...d,[l]:p})},o=async()=>{for(const s in d)if(d[s]===""){h.fire({icon:"error",title:"Oops...",text:"Por favor complete todos los campos"});return}if(d.Contrasena!==d.Verificar_Contrasena){h.fire({icon:"error",title:"Oops...",text:"Las contraseñas no coinciden. Por favor verifique."});return}try{(await fetch("http://localhost:3000/usuario/agregar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok?(h.fire({icon:"success",title:"Usuario creado correctamente"}),x({IdTipo_identificacion:"",IdUsuario:"",Correo:"",Contrasena:"",Verificar_Contrasena:"",IdCargo:""})):h.fire({icon:"error",title:"Oops...",text:"Error al crear el usuario"})}catch(s){console.error("Error:",s)}};return e.jsx("div",{className:"fondo",children:e.jsx("div",{className:"registro",children:e.jsxs("form",{className:"form-inicio1",id:"login-form",children:[e.jsx("h1",{children:"Registrarse"}),e.jsx(P,{isRequired:!0,label:"Tipo de documento",placeholder:"Escriba su tipo de documento",value:d.IdTipo_identificacion,className:"respuesta1",onChange:s=>a(s,"IdTipo_identificacion")}),e.jsx(P,{isRequired:!0,type:"name",label:"Ingresa tu numero de documento ",value:d.IdUsuario,className:"respuesta1",onChange:s=>a(s,"IdUsuario")}),e.jsx(P,{isRequired:!0,type:"email",label:"Email",value:d.Correo,className:"respuesta1",onChange:s=>a(s,"Correo")}),e.jsx(P,{isRequired:!0,label:"Contraseña",variant:"password",placeholder:"Ingrese su contraseña",value:d.Contrasena,type:"password",className:"respuesta1",onChange:s=>a(s,"Contrasena")}),e.jsx(P,{isRequired:!0,label:"Confirme su contraseña",variant:"password",placeholder:"Confirme su contraseña",value:d.Verificar_Contrasena,type:"password",className:"respuesta1",onChange:s=>a(s,"Verificar_Contrasena")}),e.jsx(P,{isRequired:!0,label:"Seleccione su cargo",placeholder:"Seleccione su cargo",value:d.IdCargo,className:"respuesta1",onChange:s=>a(s,"IdCargo")}),e.jsx(i,{color:"primary",variant:"ghost",onClick:o,children:"Registrarse"}),e.jsx("br",{})," O ",e.jsx("br",{}),e.jsx(C,{to:"/",children:e.jsx(i,{color:"danger",variant:"bordered",children:"Volver al inicio"})})]})})})};function ae(){const d=()=>{h.fire({title:"¿Estás seguro?",text:"¿Deseas cerrar sesión?",icon:"question",showCancelButton:!0,confirmButtonText:"Sí, cerrar sesión",cancelButtonText:"Cancelar"}).then(x=>{x.isConfirmed&&(localStorage.removeItem("user"),window.location.href="/")})};return e.jsxs("ul",{className:"menu",children:[e.jsx("li",{children:e.jsx("a",{href:"http://localhost:3001/proveedor",className:"",children:"Proveedores"})}),e.jsx("li",{children:e.jsx("a",{href:"http://localhost:3001/empleados",className:"",children:"Gestionar empleados"})}),e.jsx("li",{children:e.jsx("a",{href:"http://localhost:3001/registrarusuario",className:"",children:"Gestionar usuarios"})}),e.jsx("li",{children:e.jsx("a",{href:"#",onClick:d,children:"Cerrar sesión"})})]})}class Ot extends m.Component{constructor(){super(...arguments);u(this,"state",{data:[],modalInsertar:!1,modalEliminar:!1,form:{IdTipo_identificacion:"",IdUsuario:"",Correo:"",Contrasena:"",Verificar_Contrasena:"",IdCargo:"",Tipo_identificacion:""},tiposIdentificacion:[]});u(this,"peticionGet",()=>{I.get("http://localhost:3000/usuario/ver_usuario").then(a=>{this.setState({data:a.data})}).catch(a=>{console.log(a.message)})});u(this,"pGetSelect",()=>{I.get("http://localhost:3000/selectid/T").then(a=>{this.setState({tiposIdentificacion:a.data})}).catch(a=>{console.log(a)})});u(this,"peticionPost",async()=>{try{const{Correo:a,IdUsuario:o,IdCargo:s}=this.state.form;if(!a.includes("@")){h.fire("","El campo de correo debe contener el carácter @","error");return}if(s!=="Administrador"&&s!=="Empleado"){h.fire("","Cargo no válido","error");return}const l=await I.post("http://localhost:3000/usuario/agregar",this.state.form);this.modalInsertar(),this.peticionGet(),h.fire({text:"Usuario creado exitosamente",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar"}).then(p=>{p.isConfirmed&&this.refreshPage()})}catch(a){console.log(a.message),h.fire("","Hubo un problema al crear el usuario","error")}});u(this,"refreshPage",()=>{window.location.reload()});u(this,"peticionDelete",async()=>{try{await I.delete(`http://localhost:3000/usuario/eliminar/${this.state.form.IdUsuario}`),this.setState({modalEliminar:!1}),this.peticionGet(),h.fire({text:"Usuario eliminado exitosamente",icon:"success",timer:1800,showConfirmButton:!1})}catch(a){console.error(a.message),h.fire("","Hubo un problema al eliminar el usuario","error")}});u(this,"modalInsertar",()=>{this.setState({modalInsertar:!this.state.modalInsertar})});u(this,"handleChange",a=>{const{name:o,value:s}=a.target;this.setState(l=>({form:{...l.form,[o]:s}}))})}componentDidMount(){this.peticionGet(),this.pGetSelect()}render(){const{form:a,tiposIdentificacion:o}=this.state;return e.jsxs("div",{className:"App",children:[e.jsx("br",{}),e.jsx(i,{className:"btn btn-success",onClick:()=>{this.setState({form:{}}),this.modalInsertar()},children:"Agregar Usuario"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Número de Identificación"}),e.jsx("th",{children:"Correo"}),e.jsx("th",{children:"Cargo"}),e.jsx("th",{children:"ACCIONES"})]})}),e.jsx("tbody",{children:this.state.data.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.IdUsuario}),e.jsx("td",{children:s.Correo}),e.jsx("td",{children:s.IdCargo}),e.jsx("td",{children:e.jsx(i,{className:"btn btn-danger",onClick:()=>{this.setState({form:{IdUsuario:s.IdUsuario},modalEliminar:!0})},children:e.jsx(ee,{icon:ye})})})]},s.IdUsuario))})]}),e.jsxs(Z,{isOpen:this.state.modalInsertar,children:[e.jsx(me,{children:"Agregar Usuario"}),e.jsxs(Q,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo de Identificación:"}),e.jsxs("select",{className:"form-control",name:"IdTipo_identificacion",onChange:this.handleChange,value:a.IdTipo_identificacion||"",children:[e.jsx("option",{value:"",children:"SELECCIONE TIPO IDENTIFICACION"}),o.map(s=>e.jsx("option",{value:s.IdTipo_identificacion,children:s.Tipo_identificacion},s.IdTipo_identificacion))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Número de Identificación:"}),e.jsx("input",{className:"form-control",type:"number",name:"IdUsuario",onChange:this.handleChange,value:a.IdUsuario||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Correo:"}),e.jsx("input",{className:"form-control",type:"text",name:"Correo",onChange:this.handleChange,value:a.Correo||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contraseña:"}),e.jsx("input",{className:"form-control",type:"password",name:"Contrasena",onChange:this.handleChange,value:a.Contrasena||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Verificar Contraseña:"}),e.jsx("input",{className:"form-control",type:"password",name:"Verificar_Contrasena",onChange:this.handleChange,value:a.Verificar_Contrasena||""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cargo:"}),e.jsxs("select",{className:"form-control",name:"IdCargo",onChange:this.handleChange,value:a.IdCargo||"",children:[e.jsx("option",{value:"",children:"Seleccione un cargo"}),e.jsx("option",{value:"Administrador",children:"Administrador"}),e.jsx("option",{value:"Empleado",children:"Empleado"})]})]})]}),e.jsxs(W,{children:[e.jsx("button",{className:"btn btn-primary",onClick:this.peticionPost,children:"Insertar"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>this.modalInsertar(),children:"Cancelar"})]})]}),e.jsxs(Z,{isOpen:this.state.modalEliminar,children:[e.jsx(me,{children:"Eliminar Usuario"}),e.jsx(Q,{children:"¿Está seguro de que desea eliminar el usuario?"}),e.jsxs(W,{children:[e.jsx("button",{className:"btn btn-danger",onClick:this.peticionDelete,children:"Sí"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>this.setState({modalEliminar:!1}),children:"No"})]})]})]})}}const Dt=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx(C,{to:"/venta",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Registro Ventas"})}),e.jsx("div",{className:"Avat",children:e.jsx(ae,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"tAb",children:e.jsx(Ot,{})})]});class At extends m.Component{constructor(){super(...arguments);u(this,"state",{data:[],modalInsertar:!1,modalEliminar:!1,form:{IdProveedor:"",Empresa:"",Contacto:"",tipoModal:""},currentPage:1,itemsPerPage:6,searchTerm:""});u(this,"peticionGet",()=>{I.get("http://localhost:3000/Proveedor/P").then(a=>{this.setState({data:a.data})}).catch(a=>{console.log(a.message)})});u(this,"peticionPost",async()=>{delete this.state.form.IdProveedor,await I.post("http://localhost:3000/Proveedor/crear",{...this.state.form,Empresa:this.state.form.Empresa,Contacto:this.state.form.Contacto}).then(a=>{this.modalInsertar(),this.setState(o=>({data:[...o.data,a.data]})),h.fire({title:"Éxito",text:"Proveedor agregado exitosamente",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar"}).then(o=>{o.isConfirmed&&window.location.reload()})}).catch(a=>{console.log(a.message),h.fire("Error","Hubo un problema al crear el proveedor","error")})});u(this,"peticionPut",()=>{I.put(`http://localhost:3000/Proveedor/modificar/${this.state.form.IdProveedor}`,{...this.state.form,Empresa:this.state.form.Empresa,Contacto:this.state.form.Contacto}).then(a=>{this.modalInsertar(),this.setState(o=>({data:o.data.map(s=>s.IdProveedor===this.state.form.IdProveedor?{...s,Empresa:this.state.form.Empresa,Contacto:this.state.form.Contacto}:s)})),h.fire({text:"Proveedor Actualizado exitosamente",icon:"success",timer:1800,showConfirmButton:!1})}).catch(a=>{console.error(a.message),h.fire("","Hubo un problema al actualizar el proveedor","error")})});u(this,"peticionDelete",()=>{I.delete(`http://localhost:3000/Proveedor/eliminar/${this.state.form.IdProveedor}`).then(a=>{this.setState({modalEliminar:!1}),this.setState(o=>({data:o.data.filter(s=>s.IdProveedor!==this.state.form.IdProveedor)})),h.fire({text:"Proveedor Eliminado exitosamente",icon:"success",timer:1800,showConfirmButton:!1})}).catch(a=>{console.error(a.message),h.fire("","Hubo un problema al eliminar el proveedor","error")})});u(this,"modalInsertar",()=>{this.setState({modalInsertar:!this.state.modalInsertar})});u(this,"seleccionarProducto",a=>{this.setState({tipoModal:"actualizar",form:{IdProveedor:a.IdProveedor,Empresa:a.Empresa,Contacto:a.Contacto}})});u(this,"handleChange",a=>{const{name:o,value:s}=a.target;this.setState(l=>({form:{...l.form,[o]:s}}))});u(this,"handleSearch",a=>{this.setState({searchTerm:a.target.value})})}componentDidMount(){this.peticionGet(),this.setState({form:{...this.state.form,tipoModal:"insertar"}})}render(){const{form:a,currentPage:o,itemsPerPage:s,searchTerm:l}=this.state,p=this.state.data.filter(v=>v.Empresa.toLowerCase().includes(l.toLowerCase())),N=o*s,D=N-s,O=p.slice(D,N),E=v=>this.setState({currentPage:v}),b=[];for(let v=1;v<=Math.ceil(p.length/s);v++)b.push(v);const w=b.map(v=>e.jsx("li",{className:`page-item ${o===v?"active":""}`,children:e.jsx("a",{onClick:()=>E(v),href:"#",className:"page-link",children:v})},v));return e.jsxs("div",{className:"App",children:[e.jsx("br",{}),e.jsx(i,{className:"btn btn-success",onClick:()=>{this.setState({form:{},tipoModal:"insertar"}),this.modalInsertar()},children:"Agregar Proveedor"}),e.jsx("input",{className:"buscar-cont",type:"text",placeholder:"Buscar por nombre del proveedor",value:l,onChange:this.handleSearch}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"EMPRESA"}),e.jsx("th",{children:"CONTACTO"}),e.jsx("th",{children:"ACCIONES"})]})}),e.jsx("tbody",{children:O.map(v=>e.jsxs("tr",{children:[e.jsx("td",{children:v.IdProveedor}),e.jsx("td",{children:v.Empresa}),e.jsx("td",{children:v.Contacto}),e.jsxs("td",{children:[e.jsx(i,{className:"btn btn-primary",onClick:()=>{this.seleccionarProducto(v),this.modalInsertar()},children:e.jsx(ee,{icon:Ge})}),"   ",e.jsx(i,{className:"btn btn-danger",onClick:()=>{this.seleccionarProducto(v),this.setState({modalEliminar:!0})},children:e.jsx(ee,{icon:ye})})]})]},v.IdProveedor))})]}),e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsx("ul",{className:"pagination justify-content-center",children:w})}),e.jsxs(Z,{isOpen:this.state.modalInsertar,children:[e.jsx(me,{children:this.state.tipoModal==="insertar"?"Agregar Proveedor":"Actualizar Proveedor"}),e.jsx(Q,{children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Empresa:"}),e.jsx("input",{className:"form-control",type:"text",name:"Empresa",onChange:this.handleChange,value:a.Empresa||""}),e.jsx("br",{}),e.jsx("label",{children:"Contacto:"}),e.jsx("input",{className:"form-control",type:"text",name:"Contacto",onChange:this.handleChange,value:a.Contacto||""})]})}),e.jsxs(W,{children:[e.jsx("button",{className:"btn btn-primary",onClick:this.state.tipoModal==="insertar"?this.peticionPost:this.peticionPut,children:this.state.tipoModal==="insertar"?"Insertar":"Actualizar"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>this.modalInsertar(),children:"Cancelar"})]})]}),e.jsxs(Z,{isOpen:this.state.modalEliminar,children:[e.jsx(me,{children:"Eliminar Proveedor"}),e.jsx(Q,{children:"¿Está seguro de que desea eliminar al proveedor?"}),e.jsxs(W,{children:[e.jsx("button",{className:"btn btn-danger",onClick:this.peticionDelete,children:"Sí"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>this.setState({modalEliminar:!1}),children:"No"})]})]})]})}}const Tt=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx(C,{to:"/venta",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Registro Ventas"})}),e.jsx("div",{className:"Avat",children:e.jsx(ae,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"tAbP",children:e.jsx(At,{})})]});tt.register(at,st,ot,rt,nt);const ge="http://localhost:3000";let Ze=class extends m.Component{constructor(){super(...arguments);u(this,"state",{proveedores:[],categoria:[],data:[],modalInsertar:!1,modalEliminar:!1,modalAgregarCantidad:!1,form:{IdProducto:"",Nombre:"",Nombre_categoria_FK:"",Proveedor:"",Descripcion:"",Fecha:"",Estado:"",Precio:"",cantidadAgregar:""},productosAgrupados:[],currentPage:1,productsPerPage:6,searchTerm:""});u(this,"generateRandomColor",()=>"#"+Math.floor(Math.random()*16777215).toString(16));u(this,"GetSelectP",()=>{I.get(`${ge}/proveedores/P`).then(a=>{Array.isArray(a.data)?this.setState({proveedores:a.data}):a.data&&Object.keys(a.data).length===0?console.error("La respuesta está vacía."):console.error("La respuesta no es un array:",a.data)}).catch(a=>{console.log(a)})});u(this,"pGetSelect",()=>{I.get(`${ge}/select/S`).then(a=>{Array.isArray(a.data)?this.setState({categoria:a.data}):a.data&&Object.keys(a.data).length===0?console.error("La respuesta está vacía."):console.error("La respuesta no es un array:",a.data)}).catch(a=>{console.log(a)})});u(this,"peticionGet",()=>{I.get(`${ge}/`).then(a=>{const o=a.data,s=o.reduce((N,D)=>{const{IdProducto:O,Nombre:E,Descripcion:b,...w}=D,v=N.findIndex(B=>B.Nombre===E);return v!==-1?N[v].Descripcion+=parseFloat(b):N.push({IdProducto:O,Nombre:E,Descripcion:parseFloat(b),...w}),N},[]),l=o.reduce((N,D)=>{const{Nombre:O,Descripcion:E}=D;return N[O]?N[O].Cantidad+=parseFloat(E):N[O]={...D,Cantidad:parseFloat(E)},N},{}),p=s.map(N=>({...N,Estado:N.Descripcion>0?"Disponible":"Agotado"}));this.setState({data:p,productosAgrupados:Object.values(l)})}).catch(a=>{console.log(a.message)})});u(this,"peticionPut",async()=>{const{form:a}=this.state,o=new Date().toISOString().split("T")[0];try{await I.put(`${ge}/actualizar-producto/${a.IdProducto}`,{...a,Fecha:o}),this.modalInsertar(),this.peticionGet(),h.fire({title:"Éxito",text:"El producto se ha modificado correctamente.",icon:"success",confirmButtonText:"OK"}),a.Descripcion<=10&&alert(`El producto ${a.Nombre} sigue con pocas unidades, haz un nuevo pedido.`)}catch(s){console.log(s.message)}});u(this,"agregarCantidad",()=>{const{IdProducto:a,cantidadAgregar:o}=this.state.form;I.put(`http://localhost:3000/agregar-cantidad/${a}`,{cantidad:o}).then(s=>{this.setState(l=>({modalAgregarCantidad:!1,data:l.data.map(p=>p.IdProducto===a?{...p,Descripcion:p.Descripcion+parseFloat(o),Estado:p.Descripcion+parseFloat(o)>0?"Disponible":"Agotado"}:p)})),h.fire({title:"¡Cantidad agregada!",text:"La cantidad ha sido agregada correctamente.",icon:"success",confirmButtonText:"OK"})}).catch(s=>{console.log(s.message)})});u(this,"peticionDelete",async()=>{const{form:a}=this.state;try{await I.delete(`${ge}/eliminar-producto/${a.IdProducto}`),this.setState(o=>({modalEliminar:!1,data:o.data.filter(s=>s.IdProducto!==a.IdProducto)})),h.fire({title:"Éxito",text:"El producto se ha eliminado correctamente.",icon:"success",confirmButtonText:"OK"})}catch(o){console.log(o.message)}});u(this,"peticionPost",async()=>{delete this.state.form.IdProducto;const a=new Date().toISOString().split("T")[0];this.setState({form:{...this.state.form,Fecha:a}}),await I.post(`${ge}/crear`,this.state.form).then(o=>{this.modalInsertar(),this.peticionGet(),h.fire({title:"Éxito",text:"El producto se agregó correctamente",icon:"success",confirmButtonText:"OK"})}).catch(o=>{console.log(o.message)})});u(this,"modalInsertar",()=>{this.setState({modalInsertar:!this.state.modalInsertar})});u(this,"seleccionarProducto",a=>{const{Id_categoria:o,Fecha:s,...l}=a,p=new Date(s).toISOString().split("T")[0];this.setState({form:{...l,Nombre_categoria_FK:o,Fecha:p}})});u(this,"handleChange",a=>{const{name:o,value:s}=a.target;let l=this.state.form.Estado;o==="Descripcion"&&(l=parseInt(s)>0?"Disponible":"Agotado"),this.setState({form:{...this.state.form,[o]:s,Estado:l}})});u(this,"handleSearch",a=>{this.setState({searchTerm:a.target.value})})}componentDidMount(){this.GetSelectP(),this.pGetSelect(),this.peticionGet(),this.setState({form:{...this.state.form,tipoModal:"insertar"}})}render(){const{form:a,currentPage:o,productsPerPage:s,searchTerm:l}=this.state,p=this.state.data.filter(c=>c.Nombre.toLowerCase().includes(l.toLowerCase())),N=o*s,D=N-s,O=p.slice(D,N),E=c=>this.setState({currentPage:c}),b=[];for(let c=1;c<=Math.ceil(p.length/s);c++)b.push(c);const w=b.map(c=>e.jsx("li",{className:`page-item ${o===c?"active":""}`,children:e.jsx("a",{onClick:()=>E(c),href:"#",className:"page-link",children:c})},c)),v=this.state.productosAgrupados.map(c=>c.Cantidad),B=this.state.productosAgrupados.map(c=>c.Nombre),z=this.state.productosAgrupados.map(()=>this.generateRandomColor()),F={labels:B,datasets:[{label:"Cantidad de productos",data:v,backgroundColor:z,borderColor:z,borderWidth:1}]},J={scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{drawBorder:!1},ticks:{stepSize:Math.ceil(Math.max(...v)/5)}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:c=>{const _=this.state.productosAgrupados[c.dataIndex];return`Nombre: ${_.Nombre}
Cantidad Agregada: ${_.Cantidad}
Cantidad Vendida: ${_.CantidadVendida||0}
Fecha: ${_.Fecha}`}}}}};return e.jsxs("div",{className:"App",children:[e.jsx("br",{}),e.jsxs("div",{className:"table-container",children:[e.jsx(i,{className:"btn btn-success",onClick:()=>{this.setState({form:{}}),this.modalInsertar()},children:"Agregar Producto"}),e.jsx("input",{className:"buscar-cont",type:"text",placeholder:"Buscar por nombre del producto",value:l,onChange:this.handleSearch}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"PRODUCTO"}),e.jsx("th",{children:"CATEGORIA"}),e.jsx("th",{children:"PROVEEDOR"}),e.jsx("th",{children:"CANTIDAD"}),e.jsx("th",{children:"FECHA INGRESO"}),e.jsx("th",{children:"ESTADO"}),e.jsx("th",{children:"PRECIO"}),e.jsx("th",{children:"ACCIONES"})]})}),e.jsx("tbody",{children:O.map(c=>{const _=new Date(c.Fecha).toISOString().split("T")[0];return e.jsxs("tr",{children:[e.jsx("td",{children:c.IdProducto}),e.jsx("td",{children:c.Nombre}),e.jsx("td",{children:c.Nombre_categoria}),e.jsx("td",{children:c.Proveedor}),e.jsx("td",{children:c.Descripcion}),e.jsx("td",{children:_})," ",e.jsx("td",{children:c.Estado}),e.jsx("td",{children:new Intl.NumberFormat("en-EN").format(c.Precio)}),e.jsxs("td",{children:[e.jsx(i,{className:"btn btn-primary",onClick:()=>{this.seleccionarProducto(c),this.modalInsertar()},children:e.jsx(ee,{icon:Ge})}),"   ",e.jsx(i,{className:"btn btn-success",onClick:()=>{this.seleccionarProducto(c),this.setState({modalAgregarCantidad:!0})},children:e.jsx(ee,{icon:it})}),"   ",e.jsx(i,{className:"btn btn-danger",onClick:()=>{this.seleccionarProducto(c),this.setState({modalEliminar:!0})},children:e.jsx(ee,{icon:ye})})]})]},c.IdProducto)})})]}),O.map(c=>c.Descripcion<=10?e.jsx("div",{className:"alert alert-warning",children:e.jsxs("p",{children:['El producto "',c.Nombre,'" le quedan pocas unidades, haz un nuevo pedido.']})},c.IdProducto):null)]}),e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsx("ul",{className:"pagination justify-content-center",children:w})}),e.jsx("div",{className:"chart-container",children:e.jsx(lt,{data:F,options:J})}),e.jsxs(Z,{isOpen:this.state.modalInsertar,children:[e.jsx(me,{style:{display:"block"},children:e.jsx("span",{style:{float:"right"},onClick:()=>this.modalInsertar(),children:"x"})}),e.jsx(Q,{children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"Nombre",children:"PRODUCTO"}),e.jsx("input",{className:"form-control",type:"text",name:"Nombre",id:"Nombre",onChange:this.handleChange,value:a.Nombre||""}),e.jsx("br",{}),e.jsxs("select",{onChange:this.handleChange,name:"Nombre_categoria_FK",id:"Nombre_categoria_FK",className:"form-control",value:a.Nombre_categoria_FK||"",children:[e.jsx("option",{value:"",children:"SELECCIONE UNA CATEGORIA"}),this.state.categoria.map(c=>e.jsx("option",{value:c.Id_categoria,children:c.Nombre_categoria},c.Id_categoria))]}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Proveedor",children:"PROVEEDOR"}),e.jsxs("select",{className:"form-control",name:"Proveedor",id:"Proveedor",onChange:this.handleChange,value:a.Proveedor||"",children:[e.jsx("option",{value:"",children:"SELECCIONE UN PROVEEDOR"}),this.state.proveedores.map(c=>e.jsx("option",{value:c.Empresa,children:c.Empresa},c.IdProveedor))]}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Descripcion",children:"CANTIDAD"}),e.jsx("input",{className:"form-control",type:"number",name:"Descripcion",id:"Descripcion",onChange:this.handleChange,value:a.Descripcion||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Fecha",children:"FECHA INGRESO"}),e.jsx("input",{className:"form-control",type:"text",name:"Fecha",id:"Fecha",value:a.Fecha||"",readOnly:!0}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Estado",children:"ESTADO"}),e.jsx("select",{className:"form-control",name:"Estado",id:"Estado",onChange:this.handleChange,value:a.Estado||"",disabled:!0,children:e.jsx("option",{value:"",children:a.Estado})}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Precio",children:"PRECIO"}),e.jsx("input",{className:"form-control",type:"number",name:"Precio",id:"Precio",onChange:this.handleChange,value:a.Precio||""})]})}),e.jsxs(W,{children:[a.IdProducto?e.jsx(i,{className:"btn btn-primary",onClick:()=>this.peticionPut(),children:"Actualizar"}):e.jsx(i,{className:"btn btn-success",onClick:()=>this.peticionPost(),children:"Insertar"}),e.jsx(i,{className:"btn btn-danger",onClick:()=>this.modalInsertar(),children:"Cancelar"})]})]}),e.jsxs(Z,{isOpen:this.state.modalEliminar,children:[e.jsxs(Q,{children:["Estás seguro que deseas eliminar el producto ",a&&a.Nombre]}),e.jsxs(W,{children:[e.jsx(i,{className:"btn btn-danger",onClick:()=>this.peticionDelete(),children:"Sí"}),e.jsx(i,{className:"btn btn-secondary",onClick:()=>this.setState({modalEliminar:!1}),children:"No"})]})]}),e.jsxs(Z,{isOpen:this.state.modalAgregarCantidad,children:[e.jsx(Q,{children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"cantidadAgregar",children:"Cantidad a agregar:"}),e.jsx("input",{className:"form-control",type:"number",name:"cantidadAgregar",id:"cantidadAgregar",onChange:this.handleChange,value:a.cantidadAgregar||""})]})}),e.jsxs(W,{children:[e.jsx(i,{className:"btn btn-success",onClick:()=>this.agregarCantidad(),children:"Agregar"}),e.jsx(i,{className:"btn btn-secondary",onClick:()=>this.setState({modalAgregarCantidad:!1}),children:"Cancelar"})]})]})]})}};const wt=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx(C,{to:"/venta",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Registro Ventas"})}),e.jsx("div",{className:"Avat",children:e.jsx(ae,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"tAb",children:e.jsx(Ze,{})})]});function Pe(){const d=()=>{h.fire({title:"¿Seguro que quieres cerrar sesión?",icon:"question",showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(x=>{x.isConfirmed&&(localStorage.removeItem("user"),window.location.href="/")})};return e.jsx("ul",{className:"menu",children:e.jsx("li",{children:e.jsx("a",{href:"#",onClick:d,children:"Cerrar sesión"})})})}const Lt=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura_empleado",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario_empleado",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx("div",{className:"Avat",children:e.jsx(Pe,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"tAb",children:e.jsx(Ze,{})})]}),$t=()=>e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx("link",{to:"/"}),e.jsxs("ul",{className:"info",children:[e.jsx(C,{to:"/",children:e.jsx("li",{children:"Inicio"})}),e.jsx(C,{to:"/contacto",children:e.jsx("li",{children:"Contacto"})})]})]}),Bt=()=>{const d=x=>{x.preventDefault();const a=x.target.user_name.value,o=x.target.user_email.value,s=x.target.user_message.value;if(a.trim()===""||o.trim()===""||s.trim()===""){h.fire({icon:"error",title:"Campos incompletos",text:"Todos los campos son obligatorios. Por favor, complete todos los campos antes de enviar el formulario.",confirmButtonText:"OK"});return}ct.sendForm("service_njc137d","template_9g307sx",x.target,"vDzWDMaio7cDnj3Hw").then(l=>{console.log(l),h.fire({icon:"success",title:"¡Formulario enviado!",text:"Su solicitud ha sido enviada correctamente.",confirmButtonText:"OK"}).then(()=>{x.target.reset(),window.location.reload()})}).catch(l=>console.log(l))};return e.jsxs("div",{children:[e.jsx($t,{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"tAb",children:[e.jsx("br",{}),e.jsx("h1",{className:"title-form",children:"FORMULARIO DE CONTACTO"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("form",{className:"form-mail",onSubmit:d,children:[e.jsx("label",{htmlFor:"user_name",children:"Nombre de remitente"}),e.jsx(P,{type:"text",name:"user_name",id:"user_name"}),e.jsx("hr",{}),e.jsx("label",{htmlFor:"user_email",children:"Correo de remitente"}),e.jsx(P,{type:"email",name:"user_email",id:"user_email"}),e.jsx("hr",{}),e.jsx("label",{htmlFor:"user_message",children:"Mensaje"}),e.jsx("textarea",{className:"textA",name:"user_message",id:"user_message",cols:"30",rows:"10"}),e.jsx("hr",{}),e.jsx("button",{className:"submit-button",children:"Enviar"})]})]})]})},Qe="https://github.com/Santy1011/github-pages.git/assets/LogoFac-DorTbVk1.jpeg",We="https://github.com/Santy1011/github-pages.git/assets/LogoInvent-DCvsWPpY.jpeg",zt="https://github.com/Santy1011/github-pages.git/assets/LogoResVent-Bjcl0-Fv.jpeg",_t=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx("div",{className:"Avat",children:e.jsx(ae,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"QrpInv",children:[e.jsx("div",{children:e.jsx("h2",{className:"h2Invet",children:"Interfaz Administrador"})}),e.jsx("div",{className:"ContIma",children:e.jsxs(C,{to:"/factura",children:[e.jsx("img",{className:"ImgS",src:Qe}),e.jsx("h3",{className:"TextInv",children:"Factura"})]})}),e.jsx("div",{className:"ContIma",children:e.jsxs(C,{to:"/inventario",children:[e.jsx("img",{className:"ImgS",src:We}),e.jsx("h3",{className:"TextInv",children:"Inventario"})]})}),e.jsx("div",{className:"ContIma",children:e.jsxs(C,{to:"/infventa",children:[e.jsx("img",{className:"ImgS",src:zt}),e.jsx("h3",{className:"TextInv",children:"Registro Ventas"})]})})]})]}),Rt=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx("div",{className:"Avat",children:e.jsx(Pe,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"QrpInv",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"h2Invet",children:"Interfaz Empleado"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"ContIma",children:e.jsxs(He,{to:"/factura_empleado",activeClassName:"active",children:[e.jsx("img",{className:"ImgS",src:Qe,alt:"Factura"}),e.jsx("h3",{className:"TextInv",children:"Factura"})]})}),e.jsx("div",{className:"ContIma",children:e.jsxs(He,{to:"/inventario_empleado",activeClassName:"active",children:[e.jsx("img",{className:"ImgS",src:We,alt:"Inventario"}),e.jsx("h3",{className:"TextInv",children:"Inventario"})]})})]})]});function kt(){const[d,x]=m.useState(""),[a,o]=m.useState(""),[s,l]=m.useState(""),[p,N]=m.useState("Bogotá"),[D,O]=m.useState("Colombia"),[E,b]=m.useState(""),[w,v]=m.useState(""),[B,z]=m.useState(1),[F,J]=m.useState(0),[c,_]=m.useState(""),[y,se]=m.useState([]),[K,te]=m.useState([]),[S,A]=m.useState(""),[je,oe]=m.useState(0),[re,Ee]=m.useState(0),[X,Fe]=m.useState(0),[Oe,pe]=m.useState([]),[De,fe]=m.useState([]),[Ce,Ae]=m.useState(null);m.useEffect(()=>{we(),Le(),Re(),Te();const t=new Image;t.src="ruta/a/la/firma/digital.png",t.onload=()=>{Ae(t)}},[]);const Te=()=>{I.get("http://localhost:3000/selectnombre/empleados").then(t=>{Array.isArray(t.data)?fe(t.data):t.data&&Object.keys(t.data).length===0?console.error("No se encontraron empleados"):console.error("La respuesta no es un array:",t.data)}).catch(t=>{console.log(t),fe([])})},we=()=>{I.get("http://localhost:3000/producto/P").then(t=>{Array.isArray(t.data)?te(t.data):console.error("No se encontraron productos disponibles")}).catch(t=>{console.log(t),te([])})},Le=()=>{I.get("http://localhost:3000/pago/p").then(t=>{Array.isArray(t.data)?pe(t.data):console.error("No se encontraron métodos de pago")}).catch(t=>{console.log(t),pe([])})},$e=()=>{if(S&&B>0){const{IdProducto:t,Nombre:r,Precio:n}=S,g=parseInt(B),j=n*g;se([...y,{IdProducto:t,Nombre:r,Precio:n,Cantidad:g}]),J(F+j),A(""),z(1),oe(0),document.querySelector(".select_producto").value=""}},Be=t=>{y[t];const r=y.filter((g,j)=>j!==t);se(r);const n=r.reduce((g,j)=>g+j.Precio*j.Cantidad,0);J(n)},ze=async()=>{const t=new Ye("p","mm","a4"),r=[25,55,109],n=[245,245,245],g=[0,0,0];t.setLineWidth(1),t.setDrawColor(r[0],r[1],r[2]),t.rect(5,5,200,287,"D"),t.setFillColor(r[0],r[1],r[2]),t.rect(10,10,190,50,"F"),t.addImage(L,"PNG",15,12,30,30),t.setFont("helvetica","bold"),t.setTextColor(255,255,255),t.setFontSize(18),t.text("Lacteos del campo",60,25),t.setFontSize(12),t.text("Factura de Venta",60,35),t.setFont("helvetica","normal"),t.setFontSize(10),t.text("NIT: 123456789-0",60,45),t.text("Dirección: Calle 123 #45-67, Bogotá, Colombia",60,55),t.text("Contacto: lacteos@delcampo.com | Tel: 123-456-7890",60,65);const j=document.getElementById("metodoPago").value,V=document.getElementById("nombreEmpleado").value,q=[["N° Factura","Fecha de venta","Método de pago","Cajero","Resolución","Vigencia"]],R=new Date,ne=R.toISOString().slice(0,10),ie=new Date(R.getTime()+15*24*60*60*1e3).toISOString().slice(0,10),le=[[c,R.toLocaleDateString(),j,V,"Res. DIAN 123456",`${ne} hasta ${ie}`]];t.autoTable({startY:80,head:q,body:le,theme:"grid",headStyles:{fillColor:r,textColor:255,fontSize:10,cellPadding:2,valign:"middle",halign:"center"},bodyStyles:{fillColor:n,textColor:g,fontSize:10,cellPadding:2,valign:"middle",halign:"center"}}),t.setFont("helvetica","bold"),t.setFontSize(12),t.text("Datos del cliente:",15,t.autoTable.previous.finalY+10);const ce=[["Nombre","Identificación","Dirección","Ciudad","País","Teléfono","Email"]],de=[[a,d,s,p,D,E,w]];t.autoTable({startY:t.autoTable.previous.finalY+15,head:ce,body:de,theme:"grid",headStyles:{fillColor:r,textColor:255,fontSize:10,cellPadding:2,valign:"middle",halign:"center"},bodyStyles:{fillColor:n,textColor:g,fontSize:10,cellPadding:2,valign:"middle",halign:"center"}}),t.setFont("helvetica","bold"),t.setFontSize(12),t.text("Detalle de la venta:",15,t.autoTable.previous.finalY+10);const U=[["Código","Descripción","Cantidad","Precio","Descuento","Total"]],k=y.map(f=>[f.IdProducto,f.Nombre,f.Cantidad,`$${f.Precio.toLocaleString("es-CO")}`,"-",`$${(f.Precio*f.Cantidad).toLocaleString("es-CO")}`]),G=F,Y=G*.19,M=G+Y;k.push(["","","","","Subtotal:",`$${G.toLocaleString("es-CO")}`],["","","","","IVA (19%):",`$${Y.toLocaleString("es-CO")}`],["","","","","Total:",`$${M.toLocaleString("es-CO")}`]),re&&k.push(["","","","","Dinero Recibido:",`$${re.toLocaleString("es-CO")}`]),X&&k.push(["","","","","Cambio:",`$${X.toLocaleString("es-CO")}`]),t.autoTable({startY:t.autoTable.previous.finalY+15,head:U,body:k,theme:"grid",headStyles:{fillColor:r,textColor:255,fontSize:10,cellPadding:2,valign:"middle",halign:"center"},bodyStyles:{fillColor:n,textColor:g,fontSize:10,cellPadding:2,valign:"middle",halign:"center"},didParseCell:function(f){(f.row.index===y.length||f.row.index===y.length+2)&&(f.cell.styles.fillColor=r,f.cell.styles.textColor=255,f.cell.styles.fontStyle="bold")}}),t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Notas:",15,t.autoTable.previous.finalY+10),t.text("- Los productos adquiridos no tienen cambio ni devolución.",15,t.autoTable.previous.finalY+15),t.text("- El cliente dispone de 5 días hábiles para reclamar la factura.",15,t.autoTable.previous.finalY+20);const H=`Factura N°: ${c}
    Fecha: ${R.toLocaleDateString()}
    Empresa: Lacteos del campo
    NIT: 123456789-0
    Dirección: Calle 123 #45-67, Bogotá, Colombia
    Contacto: lacteos@delcampo.com | Tel: 123-456-7890
    
    Productos:
    ${y.map(f=>`${f.Nombre} | Cantidad: ${f.Cantidad} | Precio: $${f.Precio.toLocaleString("es-CO")} | Total: $${(f.Precio*f.Cantidad).toLocaleString("es-CO")}`).join(`
`)}
    
    Subtotal: $${F.toLocaleString("es-CO")}
    IVA (19%): $${(F*.19).toLocaleString("es-CO")}
    Total: $${M.toLocaleString("es-CO")}`,T=40,ue=t.internal.pageSize.width-15-T,he=15,ve=await _e(H,T);ve&&t.addImage(ve,"PNG",ue,he,T,T),t.text("Firma digital:",15,t.autoTable.previous.finalY+30),Ce&&t.addImage(Ce,"PNG",15,t.autoTable.previous.finalY+35,50,20),t.setFont("helvetica","bold"),t.setFontSize(10),t.text("Factura electrónica",t.internal.pageSize.width-15,t.internal.pageSize.height-15,null,null,"right"),t.setFont("helvetica","normal"),t.setFontSize(8),t.text("Copia sin valor fiscal",t.internal.pageSize.width-15,t.internal.pageSize.height-10,null,null,"right"),t.setFont("helvetica","italic"),t.setFontSize(10),t.setTextColor(128,128,128),t.text(`Página ${t.internal.getNumberOfPages()} de ${t.internal.getNumberOfPages()}`,t.internal.pageSize.width/2,t.internal.pageSize.height-10,null,null,"center"),t.save("factura.pdf")},_e=async(t,r)=>{try{return await Ke.toDataURL(t,{width:r})}catch(n){return console.error("Error al generar el código QR:",n),null}},Re=()=>{const t=Math.floor(Math.random()*9e5)+200,g=(11-t.toString().split("").map(Number).reduce((j,V,q)=>j+V*(q%6+2),0)%11)%11;_(`${t}-${g}`)},ke=t=>{const r=K.find(n=>n.Nombre===t);A(r),r&&(z(1),oe(r.Precio))},Me=()=>{if(!d||!a||!s||!E||!w||y.length===0){h.fire({icon:"error",title:"Oops...",text:"Completa todos los campos para poder generar la venta.",showCloseButton:!0});return}if(y.filter(n=>{const g=K.find(j=>j.IdProducto===n.IdProducto);return n.Cantidad>parseFloat(g.Descripcion)}).length>0){h.fire({icon:"error",title:"Productos Agotados",text:"Algunos productos seleccionados están agotados por el momento.",showCloseButton:!0});return}const r=F*1.19;h.fire({title:"Dinero Recibido",html:`
        <p>Total a pagar: $${r.toLocaleString("es-CO")}</p>
        <input id="dineroRecibido" type="number" min="0" step="0.01" class="swal2-input" placeholder="Ingrese el dinero recibido">
      `,showCancelButton:!0,confirmButtonText:"Calcular",showLoaderOnConfirm:!0,preConfirm:()=>{const n=parseFloat(document.getElementById("dineroRecibido").value);return(isNaN(n)||n<r)&&h.showValidationMessage(`El valor recibido debe ser igual o mayor a $${r.toLocaleString("es-CO")}`),n},allowOutsideClick:()=>!h.isLoading()}).then(n=>{if(n.isConfirmed){const g=n.value,j=g-r;Ee(g),Fe(j),Ve(g,j)}})},Ve=(t,r)=>{const n=F*1.19;h.fire({icon:"success",title:"Venta realizada con éxito",html:`
        <p>La venta se ha registrado correctamente y el inventario se ha actualizado</p>
        <p>Total a pagar: $${n.toLocaleString("es-CO")}</p>
        <p>Valor recibido: $${t.toLocaleString("es-CO")}</p>
        <p>Su cambio es: $${X.toLocaleString("es-CO")}</p>
      `,showCloseButton:!0}).then(g=>{g.isConfirmed&&h.fire({title:"¿Deseas generar la factura electrónica?",icon:"question",showCancelButton:!0,confirmButtonText:"Generar Factura",cancelButtonText:"Cancelar"}).then(j=>{j.isConfirmed?ze().then(()=>{be(t,r)}):be(t,r)})})},be=async(t,r,n)=>{const g=document.getElementById("idCliente").value,j=document.getElementById("nombreCliente").value,V=document.getElementById("direccionCliente").value,q="Bogotá",R="Colombia",ne=document.getElementById("telefonoCliente").value,ie=document.getElementById("emailCliente").value,le=new Date().toISOString().slice(0,10),ce=document.getElementById("metodoPago").value,de=document.getElementById("nombreEmpleado").value,U=F,k=U*.19,G=U*1.19;try{if(await qe(y)){const M=await I.post("http://localhost:3000/facturas/crear",{idCliente:g,nombreCliente:j,direccionCliente:V,ciudadCliente:q,paisCliente:R,telefonoCliente:ne,emailCliente:ie,numeroFactura:c,fechaFactura:le,metodoPago:ce,nombreEmpleado:de,subtotal:U,iva:k,total:G,dineroRecibido:t,cambio:r,detallesFactura:y.map(H=>({descripcion:H.Nombre,cantidad:H.Cantidad,precio:H.Precio,total:H.Cantidad*H.Precio}))});M.data?console.log("Factura creada exitosamente:",M.data):console.error("Error al crear la factura:",M)}else console.error("Error al actualizar el inventario")}catch(Y){console.error("Error al realizar la venta:",Y)}},qe=async t=>{try{const r=await I.put("http://localhost:3000/vender-producto",{productosVendidos:t.map(n=>({Nombre:n.Nombre,cantidadVendida:n.Cantidad}))});return r.status===200?(h.fire({icon:"success",title:"Inventario actualizado",text:"El inventario se ha actualizado correctamente"}),!0):(console.error("Error al actualizar el inventario:",r),h.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el inventario. Inténtalo de nuevo."}),!1)}catch(r){return console.error("Error al actualizar el inventario:",r),h.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el inventario. Inténtalo de nuevo."}),!1}};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("div",{className:"tAbFactura",children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx(C,{to:"/venta",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Registro Ventas"})}),e.jsx("div",{className:"Avat",children:e.jsx(ae,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h4",{className:"card-title",children:"Detalles del Cliente"}),e.jsx(P,{label:"Número de Identificación",id:"idCliente",type:"number",className:"mb-3",value:d,onChange:t=>x(t.target.value)}),e.jsx(P,{label:"Nombre del Cliente",id:"nombreCliente",className:"mb-3",value:a,onChange:t=>o(t.target.value)}),e.jsx(P,{label:"Dirección",id:"direccionCliente",className:"mb-3",value:s,onChange:t=>l(t.target.value)}),e.jsx(P,{label:"Teléfono",id:"telefonoCliente",type:"number",className:"mb-3",value:E,onChange:t=>b(t.target.value)}),e.jsx(P,{label:"Email",id:"emailCliente",type:"email",className:"mb-3",value:w,onChange:t=>v(t.target.value),onBlur:()=>{w.includes("@")||alert("Debe ingresar un correo válido")}})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h4",{className:"card-title",children:"Detalles de la Factura"}),e.jsx(P,{label:"N° Factura",id:"numeroFactura",className:"mb-3",value:c,readOnly:!0}),e.jsx(P,{type:"date",label:"Fecha",className:"mb-3"}),e.jsxs("div",{children:[e.jsxs("select",{className:"select_pago",name:"metodoPago",id:"metodoPago",children:[e.jsx("option",{value:"",children:"Selecciona el metodo de pago"}),Oe.map((t,r)=>e.jsx("option",{value:t.Metodo_pago,children:t.Metodo_pago},r))]}),e.jsxs("select",{className:"select_nombre",name:"nombreEmpleado",id:"nombreEmpleado",children:[e.jsx("option",{value:"",children:"Selecciona el empleado"}),De.map((t,r)=>e.jsx("option",{value:t.Nombre,children:t.Nombre},r))]})]})]})})})]}),e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h4",{className:"card-title",children:"Productos"}),e.jsxs("div",{className:"row",children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"col-md-4",children:e.jsxs("select",{className:"select_producto",onChange:t=>ke(t.target.value),children:[e.jsx("option",{label:"Seleccione el producto",value:""}),K.map((t,r)=>e.jsx("option",{value:t.Nombre,children:t.Nombre},r))]})}),e.jsxs("div",{className:"col-md-2",children:[e.jsx(P,{label:"Precio",className:"mb-3",value:je.toLocaleString("es-CO"),readOnly:!0}),e.jsx("div",{className:"col-md-2",children:e.jsx(P,{label:"Cantidad",className:"mb-3",type:"number",value:B,onChange:t=>z(t.target.value)})}),e.jsxs("div",{className:"botones-factura",children:[e.jsx(i,{onClick:$e,children:"Agregar Producto"}),e.jsx(i,{onClick:Me,children:"Generar Venta"})]})]})]}),e.jsx("div",{className:"tabla",children:e.jsxs("table",{className:"table mt-4",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:y.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.Nombre}),e.jsx("td",{children:t.Cantidad}),e.jsxs("td",{children:["$",t.Precio.toLocaleString("es-CO")]}),e.jsxs("td",{children:["$",(t.Precio*t.Cantidad).toLocaleString("es-CO")]}),e.jsx("td",{children:e.jsx(i,{color:"error",onClick:()=>Be(r),children:"Eliminar"})})]},r))})]})}),e.jsxs("div",{className:"precios",children:[e.jsxs("h5",{children:["Subtotal: $",F.toLocaleString("es-CO")]}),e.jsxs("h5",{children:["IVA (19%): $",(F*.19).toLocaleString("es-CO")]}),e.jsxs("h4",{children:["Total: $",(F*1.19).toLocaleString("es-CO")]}),e.jsxs("h5",{children:["Dinero Recibido: $",re.toLocaleString("es-CO")]}),e.jsxs("h5",{children:["Cambio: $",X.toLocaleString("es-CO")]})]})]})})})})]})]})]})}function Mt(){const[d,x]=m.useState(""),[a,o]=m.useState(""),[s,l]=m.useState(""),[p,N]=m.useState("Bogotá"),[D,O]=m.useState("Colombia"),[E,b]=m.useState(""),[w,v]=m.useState(""),[B,z]=m.useState(1),[F,J]=m.useState(0),[c,_]=m.useState(""),[y,se]=m.useState([]),[K,te]=m.useState([]),[S,A]=m.useState(""),[je,oe]=m.useState(0),[re,Ee]=m.useState(0),[X,Fe]=m.useState(0),[Oe,pe]=m.useState([]),[De,fe]=m.useState([]),[Ce,Ae]=m.useState(null);m.useEffect(()=>{we(),Le(),Re(),Te();const t=new Image;t.src="ruta/a/la/firma/digital.png",t.onload=()=>{Ae(t)}},[]);const Te=()=>{I.get("http://localhost:3000/selectnombre/empleados").then(t=>{Array.isArray(t.data)?fe(t.data):t.data&&Object.keys(t.data).length===0?console.error("No se encontraron empleados"):console.error("La respuesta no es un array:",t.data)}).catch(t=>{console.log(t),fe([])})},we=()=>{I.get("http://localhost:3000/producto/P").then(t=>{Array.isArray(t.data)?te(t.data):console.error("No se encontraron productos disponibles")}).catch(t=>{console.log(t),te([])})},Le=()=>{I.get("http://localhost:3000/pago/p").then(t=>{Array.isArray(t.data)?pe(t.data):console.error("No se encontraron métodos de pago")}).catch(t=>{console.log(t),pe([])})},$e=()=>{if(S&&B>0){const{IdProducto:t,Nombre:r,Precio:n}=S,g=parseInt(B),j=n*g;se([...y,{IdProducto:t,Nombre:r,Precio:n,Cantidad:g}]),J(F+j),A(""),z(1),oe(0),document.querySelector(".select_producto").value=""}},Be=t=>{y[t];const r=y.filter((g,j)=>j!==t);se(r);const n=r.reduce((g,j)=>g+j.Precio*j.Cantidad,0);J(n)},ze=async()=>{const t=new Ye("p","mm","a4"),r=[25,55,109],n=[245,245,245],g=[0,0,0];t.setLineWidth(1),t.setDrawColor(r[0],r[1],r[2]),t.rect(5,5,200,287,"D"),t.setFillColor(r[0],r[1],r[2]),t.rect(10,10,190,50,"F"),t.addImage(L,"PNG",15,12,30,30),t.setFont("helvetica","bold"),t.setTextColor(255,255,255),t.setFontSize(18),t.text("Lacteos del campo",60,25),t.setFontSize(12),t.text("Factura de Venta",60,35),t.setFont("helvetica","normal"),t.setFontSize(10),t.text("NIT: 123456789-0",60,45),t.text("Dirección: Calle 123 #45-67, Bogotá, Colombia",60,55),t.text("Contacto: lacteos@delcampo.com | Tel: 123-456-7890",60,65);const j=document.getElementById("metodoPago").value,V=document.getElementById("nombreEmpleado").value,q=[["N° Factura","Fecha de venta","Método de pago","Cajero","Resolución","Vigencia"]],R=new Date,ne=R.toISOString().slice(0,10),ie=new Date(R.getTime()+15*24*60*60*1e3).toISOString().slice(0,10),le=[[c,R.toLocaleDateString(),j,V,"Res. DIAN 123456",`${ne} hasta ${ie}`]];t.autoTable({startY:80,head:q,body:le,theme:"grid",headStyles:{fillColor:r,textColor:255,fontSize:10,cellPadding:2,valign:"middle",halign:"center"},bodyStyles:{fillColor:n,textColor:g,fontSize:10,cellPadding:2,valign:"middle",halign:"center"}}),t.setFont("helvetica","bold"),t.setFontSize(12),t.text("Datos del cliente:",15,t.autoTable.previous.finalY+10);const ce=[["Nombre","Identificación","Dirección","Ciudad","País","Teléfono","Email"]],de=[[a,d,s,p,D,E,w]];t.autoTable({startY:t.autoTable.previous.finalY+15,head:ce,body:de,theme:"grid",headStyles:{fillColor:r,textColor:255,fontSize:10,cellPadding:2,valign:"middle",halign:"center"},bodyStyles:{fillColor:n,textColor:g,fontSize:10,cellPadding:2,valign:"middle",halign:"center"}}),t.setFont("helvetica","bold"),t.setFontSize(12),t.text("Detalle de la venta:",15,t.autoTable.previous.finalY+10);const U=[["Código","Descripción","Cantidad","Precio","Descuento","Total"]],k=y.map(f=>[f.IdProducto,f.Nombre,f.Cantidad,`$${f.Precio.toLocaleString("es-CO")}`,"-",`$${(f.Precio*f.Cantidad).toLocaleString("es-CO")}`]),G=F,Y=G*.19,M=G+Y;k.push(["","","","","Subtotal:",`$${G.toLocaleString("es-CO")}`],["","","","","IVA (19%):",`$${Y.toLocaleString("es-CO")}`],["","","","","Total:",`$${M.toLocaleString("es-CO")}`]),re&&k.push(["","","","","Dinero Recibido:",`$${re.toLocaleString("es-CO")}`]),X&&k.push(["","","","","Cambio:",`$${X.toLocaleString("es-CO")}`]),t.autoTable({startY:t.autoTable.previous.finalY+15,head:U,body:k,theme:"grid",headStyles:{fillColor:r,textColor:255,fontSize:10,cellPadding:2,valign:"middle",halign:"center"},bodyStyles:{fillColor:n,textColor:g,fontSize:10,cellPadding:2,valign:"middle",halign:"center"},didParseCell:function(f){(f.row.index===y.length||f.row.index===y.length+2)&&(f.cell.styles.fillColor=r,f.cell.styles.textColor=255,f.cell.styles.fontStyle="bold")}}),t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Notas:",15,t.autoTable.previous.finalY+10),t.text("- Los productos adquiridos no tienen cambio ni devolución.",15,t.autoTable.previous.finalY+15),t.text("- El cliente dispone de 5 días hábiles para reclamar la factura.",15,t.autoTable.previous.finalY+20);const H=`Factura N°: ${c}
    Fecha: ${R.toLocaleDateString()}
    Empresa: Lacteos del campo
    NIT: 123456789-0
    Dirección: Calle 123 #45-67, Bogotá, Colombia
    Contacto: lacteos@delcampo.com | Tel: 123-456-7890
    
    Productos:
    ${y.map(f=>`${f.Nombre} | Cantidad: ${f.Cantidad} | Precio: $${f.Precio.toLocaleString("es-CO")} | Total: $${(f.Precio*f.Cantidad).toLocaleString("es-CO")}`).join(`
`)}
    
    Subtotal: $${F.toLocaleString("es-CO")}
    IVA (19%): $${(F*.19).toLocaleString("es-CO")}
    Total: $${M.toLocaleString("es-CO")}`,T=40,ue=t.internal.pageSize.width-15-T,he=15,ve=await _e(H,T);ve&&t.addImage(ve,"PNG",ue,he,T,T),t.text("Firma digital:",15,t.autoTable.previous.finalY+30),Ce&&t.addImage(Ce,"PNG",15,t.autoTable.previous.finalY+35,50,20),t.setFont("helvetica","bold"),t.setFontSize(10),t.text("Factura electrónica",t.internal.pageSize.width-15,t.internal.pageSize.height-15,null,null,"right"),t.setFont("helvetica","normal"),t.setFontSize(8),t.text("Copia sin valor fiscal",t.internal.pageSize.width-15,t.internal.pageSize.height-10,null,null,"right"),t.setFont("helvetica","italic"),t.setFontSize(10),t.setTextColor(128,128,128),t.text(`Página ${t.internal.getNumberOfPages()} de ${t.internal.getNumberOfPages()}`,t.internal.pageSize.width/2,t.internal.pageSize.height-10,null,null,"center"),t.save("factura.pdf")},_e=async(t,r)=>{try{return await Ke.toDataURL(t,{width:r})}catch(n){return console.error("Error al generar el código QR:",n),null}},Re=()=>{const t=Math.floor(Math.random()*9e5)+200,g=(11-t.toString().split("").map(Number).reduce((j,V,q)=>j+V*(q%6+2),0)%11)%11;_(`${t}-${g}`)},ke=t=>{const r=K.find(n=>n.Nombre===t);A(r),r&&(z(1),oe(r.Precio))},Me=()=>{if(!d||!a||!s||!E||!w||y.length===0){h.fire({icon:"error",title:"Oops...",text:"Completa todos los campos para poder generar la venta.",showCloseButton:!0});return}if(y.filter(n=>{const g=K.find(j=>j.IdProducto===n.IdProducto);return n.Cantidad>parseFloat(g.Descripcion)}).length>0){h.fire({icon:"error",title:"Productos Agotados",text:"Algunos productos seleccionados están agotados por el momento.",showCloseButton:!0});return}const r=F*1.19;h.fire({title:"Dinero Recibido",html:`
        <p>Total a pagar: $${r.toLocaleString("es-CO")}</p>
        <input id="dineroRecibido" type="number" min="0" step="0.01" class="swal2-input" placeholder="Ingrese el dinero recibido">
      `,showCancelButton:!0,confirmButtonText:"Calcular",showLoaderOnConfirm:!0,preConfirm:()=>{const n=parseFloat(document.getElementById("dineroRecibido").value);return(isNaN(n)||n<r)&&h.showValidationMessage(`El valor recibido debe ser igual o mayor a $${r.toLocaleString("es-CO")}`),n},allowOutsideClick:()=>!h.isLoading()}).then(n=>{if(n.isConfirmed){const g=n.value,j=g-r;Ee(g),Fe(j),Ve(g,j)}})},Ve=(t,r)=>{const n=F*1.19;h.fire({icon:"success",title:"Venta realizada con éxito",html:`
        <p>La venta se ha registrado correctamente y el inventario se ha actualizado</p>
        <p>Total a pagar: $${n.toLocaleString("es-CO")}</p>
        <p>Valor recibido: $${t.toLocaleString("es-CO")}</p>
        <p>Su cambio es: $${X.toLocaleString("es-CO")}</p>
      `,showCloseButton:!0}).then(g=>{g.isConfirmed&&h.fire({title:"¿Deseas generar la factura electrónica?",icon:"question",showCancelButton:!0,confirmButtonText:"Generar Factura",cancelButtonText:"Cancelar"}).then(j=>{j.isConfirmed?ze().then(()=>{be(t,r)}):be(t,r)})})},be=async(t,r,n)=>{const g=document.getElementById("idCliente").value,j=document.getElementById("nombreCliente").value,V=document.getElementById("direccionCliente").value,q="Bogotá",R="Colombia",ne=document.getElementById("telefonoCliente").value,ie=document.getElementById("emailCliente").value,le=new Date().toISOString().slice(0,10),ce=document.getElementById("metodoPago").value,de=document.getElementById("nombreEmpleado").value,U=F,k=U*.19,G=U*1.19;try{if(await qe(y)){const M=await I.post("http://localhost:3000/facturas/crear",{idCliente:g,nombreCliente:j,direccionCliente:V,ciudadCliente:q,paisCliente:R,telefonoCliente:ne,emailCliente:ie,numeroFactura:c,fechaFactura:le,metodoPago:ce,nombreEmpleado:de,subtotal:U,iva:k,total:G,dineroRecibido:t,cambio:r,detallesFactura:y.map(T=>({descripcion:T.Nombre,cantidad:T.Cantidad,precio:T.Precio,total:T.Cantidad*T.Precio}))});M.data?(console.log("Factura creada exitosamente:",M.data),h.fire({icon:"success",title:"Factura creada exitosamente",text:"La factura se ha creado correctamente"}).then(()=>{h.fire({title:"¿Deseas realizar otra venta?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then(T=>{T.isConfirmed&&window.location.reload()})})):h.fire({icon:"error",title:"Error al crear la factura",text:"No se pudo crear la factura. Inténtalo de nuevo."});const H=K.map(T=>{const ue=y.find(he=>he.IdProducto===T.IdProducto);if(ue){const he=parseFloat(T.Descripcion)-ue.Cantidad;return{...T,Descripcion:he.toString()}}return T});te(H),h.fire({icon:"success",title:"Inventario actualizado",text:"El inventario se ha actualizado correctamente",confirmButtonText:"OK",allowOutsideClick:!1})}else h.fire({icon:"error",title:"Error al actualizar el inventario",text:"No se pudo actualizar el inventario. La factura no se creará."})}catch(Y){console.error("Error al realizar la venta:",Y),h.fire({icon:"error",title:"Error",text:"Ocurrió un error al realizar la venta. Inténtalo de nuevo."})}},qe=async t=>{try{const r=await I.put("http://localhost:3000/vender-producto",{productosVendidos:t.map(n=>({Nombre:n.Nombre,cantidadVendida:n.Cantidad}))});return r.status===200?(h.fire({icon:"success",title:"Inventario actualizado",text:"El inventario se ha actualizado correctamente"}),!0):(console.error("Error al actualizar el inventario:",r),h.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el inventario. Inténtalo de nuevo."}),!1)}catch(r){return console.error("Error al actualizar el inventario:",r),h.fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar el inventario. Inténtalo de nuevo."}),!1}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura_empleado",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario_empleado",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx("div",{className:"Avat",children:e.jsx(Pe,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h4",{className:"card-title",children:"Detalles del Cliente"}),e.jsx(P,{label:"Número de Identificación",id:"idCliente",className:"mb-3",value:d,onChange:t=>x(t.target.value)}),e.jsx(P,{label:"Nombre del Cliente",id:"nombreCliente",className:"mb-3",value:a,onChange:t=>o(t.target.value)}),e.jsx(P,{label:"Dirección",id:"direccionCliente",className:"mb-3",value:s,onChange:t=>l(t.target.value)}),e.jsx(P,{label:"Teléfono",id:"telefonoCliente",className:"mb-3",value:E,onChange:t=>b(t.target.value)}),e.jsx(P,{label:"Email",id:"emailCliente",className:"mb-3",value:w,onChange:t=>v(t.target.value)})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h4",{className:"card-title",children:"Detalles de la Factura"}),e.jsx(P,{label:"N° Factura",id:"numeroFactura",className:"mb-3",value:c,readOnly:!0}),e.jsx(P,{type:"date",label:"Fecha",className:"mb-3"}),e.jsxs("div",{children:[e.jsxs("select",{className:"select_pago",name:"metodoPago",id:"metodoPago",children:[e.jsx("option",{value:"",children:"Selecciona el metodo de pago"}),Oe.map((t,r)=>e.jsx("option",{value:t.Metodo_pago,children:t.Metodo_pago},r))]}),e.jsxs("select",{className:"select_nombre",name:"nombreEmpleado",id:"nombreEmpleado",children:[e.jsx("option",{value:"",children:"Selecciona el empleado"}),De.map((t,r)=>e.jsx("option",{value:t.Nombre,children:t.Nombre},r))]})]})]})})})]}),e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h4",{className:"card-title",children:"Productos"}),e.jsxs("div",{className:"row",children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"col-md-4",children:e.jsxs("select",{className:"select_producto",onChange:t=>ke(t.target.value),children:[e.jsx("option",{label:"Seleccione el producto",value:""}),K.map((t,r)=>e.jsx("option",{value:t.Nombre,children:t.Nombre},r))]})}),e.jsxs("div",{className:"col-md-2",children:[e.jsx(P,{label:"Precio",className:"mb-3",value:je.toLocaleString("es-CO"),readOnly:!0}),e.jsx("div",{className:"col-md-2",children:e.jsx(P,{label:"Cantidad",className:"mb-3",type:"number",value:B,onChange:t=>z(t.target.value)})}),e.jsxs("div",{className:"botones-factura",children:[e.jsx(i,{onClick:$e,children:"Agregar Producto"}),e.jsx(i,{onClick:Me,children:"Generar Venta"})]})]})]}),e.jsx("div",{className:"tabla",children:e.jsxs("table",{className:"table mt-4",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:y.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.Nombre}),e.jsx("td",{children:t.Cantidad}),e.jsxs("td",{children:["$",t.Precio.toLocaleString("es-CO")]}),e.jsxs("td",{children:["$",(t.Precio*t.Cantidad).toLocaleString("es-CO")]}),e.jsx("td",{children:e.jsx(i,{color:"error",onClick:()=>Be(r),children:"Eliminar"})})]},r))})]})}),e.jsxs("div",{className:"precios",children:[e.jsxs("h5",{children:["Subtotal: $",F.toLocaleString("es-CO")]}),e.jsxs("h5",{children:["IVA (19%): $",(F*.19).toLocaleString("es-CO")]}),e.jsxs("h4",{children:["Total: $",(F*1.19).toLocaleString("es-CO")]}),e.jsxs("h5",{children:["Dinero Recibido: $",re.toLocaleString("es-CO")]}),e.jsxs("h5",{children:["Cambio: $",X.toLocaleString("es-CO")]})]})]})})})})]})]})}function Vt(){const[d,x]=m.useState([]);m.useEffect(()=>{a()},[]);const a=()=>{I.get("http://localhost:3000/selectid/T").then(o=>{Array.isArray(o.data)?x(o.data):o.data&&Object.keys(o.data).length===0?console.error("La respuesta está vacía."):console.error("La respuesta no es un array:",o.data)}).catch(o=>{console.log(o)})};return e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura_empleado",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario_empleado",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx("div",{className:"Avat",children:e.jsx(Pe,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"tAbFactura",children:e.jsx(Mt,{})}),e.jsx("br",{})]})}const Ie="http://localhost:3000/Cargos/";class qt extends m.Component{constructor(){super(...arguments);u(this,"state",{data:[],modalInsertar:!1,modalEliminar:!1,form:{},tipoModal:"insertar"});u(this,"peticionGet",()=>{I.get(Ie+"C").then(a=>{this.setState({data:a.data})}).catch(a=>{console.log(a.message)})});u(this,"peticionPost",async()=>{try{(await I.post(Ie+"crear",this.state.form)).status===200?(this.peticionGet(),this.modalInsertar(),console.log("Dato agregado correctamente.")):console.log("Dato no cargado.")}catch(a){console.log(a.message)}});u(this,"peticionPut",async()=>{try{const a=await I.put(`${Ie}actualizar/${this.state.form.Id}`,this.state.form);a.status===200?(this.modalInsertar(),this.peticionGet()):console.log("Error al actualizar el cargo. Código de estado:",a.status)}catch(a){console.log(a.message)}});u(this,"peticionDelete",async()=>{try{const a=await I.delete(`${Ie}eliminar/${this.state.form.Id}`);a.status===200?(this.setState({modalEliminar:!1}),this.peticionGet()):console.log("Error al eliminar el cargo. Código de estado:",a.status)}catch(a){console.log(a.message)}});u(this,"modalInsertar",()=>{this.setState({modalInsertar:!this.state.modalInsertar})});u(this,"seleccionarDato",a=>{this.setState({tipoModal:"actualizar",form:{...a}})});u(this,"handleChange",a=>{a.persist(),this.setState(o=>({form:{...o.form,[a.target.name]:a.target.value}}))})}componentDidMount(){this.peticionGet()}render(){const{form:a}=this.state;return e.jsxs("div",{className:"App",children:[e.jsx("br",{}),e.jsx(i,{className:"btn btn-success",onClick:()=>{this.setState({form:{},tipoModal:"insertar"}),this.modalInsertar()},children:"Agregar Cargo"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"NOMBRE"}),e.jsx("th",{children:"CARGO"}),e.jsx("th",{children:"ESTADO ACTUAL"}),e.jsx("th",{children:"ACCIÓN"})]})}),e.jsx("tbody",{children:this.state.data.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.Id}),e.jsx("td",{children:o.Nombre}),e.jsx("td",{children:o.Nombre_cargo}),e.jsx("td",{children:o.Estado_actual}),e.jsxs("td",{children:[e.jsx(i,{className:"btn btn-primary",onClick:()=>{this.seleccionarDato(o),this.modalInsertar()},children:e.jsx(ee,{icon:Ge})}),"   ",e.jsx(i,{className:"btn btn-danger",onClick:()=>{this.seleccionarDato(o),this.setState({modalEliminar:!0})},children:e.jsx(ee,{icon:ye})})]})]},o.Id))})]}),e.jsxs(Z,{isOpen:this.state.modalInsertar,children:[e.jsx(me,{style:{display:"block"},children:e.jsx("span",{style:{float:"right"},onClick:()=>this.modalInsertar(),children:"x"})}),e.jsx(Q,{children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"Id",children:"ID"}),e.jsx("input",{className:"form-control",type:"text",name:"Id",id:"Id",onChange:this.handleChange,value:a.Id||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Nombre",children:"Nombre"}),e.jsx("input",{className:"form-control",type:"text",name:"Nombre",id:"Nombre",onChange:this.handleChange,value:a.Nombre||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Nombre_cargo",children:"Cargo"}),e.jsxs("select",{className:"form-control",name:"Nombre_cargo",id:"Nombre_cargo",onChange:this.handleChange,value:a.Nombre_cargo||"",children:[e.jsx("option",{value:"",children:"Seleccione un cargo"}),e.jsx("option",{value:"Administrador",children:"Administrador"}),e.jsx("option",{value:"Empleado",children:"Empleado"})]}),e.jsx("br",{}),e.jsx("label",{htmlFor:"Estado_actual",children:"Estado actual"}),e.jsxs("select",{className:"form-control",name:"Estado_actual",id:"Estado_actual",onChange:this.handleChange,value:a.Estado_actual||"",children:[e.jsx("option",{value:"",children:"Seleccione un estado"}),e.jsx("option",{value:"Activo",children:"Activo"}),e.jsx("option",{value:"Inactivo",children:"Inactivo"})]}),e.jsx("br",{})]})}),e.jsxs(W,{children:[this.state.tipoModal==="insertar"?e.jsx(i,{className:"btn btn-success",onClick:()=>this.peticionPost(),children:"Insertar"}):e.jsx(i,{className:"btn btn-primary",onClick:()=>this.peticionPut(),children:"Actualizar"}),e.jsx(i,{className:"btn btn-danger",onClick:()=>this.modalInsertar(),children:"Cancelar"})]})]}),e.jsxs(Z,{isOpen:this.state.modalEliminar,children:[e.jsxs(Q,{children:["Estás seguro que deseas eliminar el cargo con ID ",a.Id]}),e.jsxs(W,{children:[e.jsx(i,{className:"btn btn-danger",onClick:()=>this.peticionDelete(),children:"Sí"}),e.jsx(i,{className:"btn btn-secondary",onClick:()=>this.setState({modalEliminar:!1}),children:"No"})]})]})]})}}const Ut=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx(C,{to:"/venta",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Registro Ventas"})}),e.jsx("div",{className:"Avat",children:e.jsx(ae,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"tAb",children:e.jsx(qt,{})})]});class Je extends m.Component{constructor(){super(...arguments);u(this,"state",{data:[],modalVer:!1,form:{id:"",descripcion:"",nombreEmpleado:"",fecha:"",cantidad:"",precio:"",total:"",numeroFactura:""},currentPage:1,itemsPerPage:6,fechaInicial:"",fechaFinal:"",busqueda:""});u(this,"handleFechaInicialChange",a=>{const o=a.target.value;this.setState({fechaInicial:o})});u(this,"handleFechaFinalChange",a=>{const o=a.target.value;this.setState({fechaFinal:o})});u(this,"buscar",()=>{const{fechaInicial:a,fechaFinal:o}=this.state;if(a&&o){const s=`http://localhost:3000/facturas_vendidas/ventas/${a}/${o}`;fetch(s).then(l=>l.json()).then(l=>{this.setState({data:l})}).catch(l=>{console.error("Error al obtener los datos:",l)})}else h.fire({icon:"warning",title:"Fechas no seleccionadas",text:"Por favor, selecciona una fecha inicial y una fecha final.",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})});u(this,"normalizarFecha",a=>{const o=a.split("-"),s=o[0],l=o[1].length===1?"0"+o[1]:o[1],p=o[2];return`${s}-${l}-${p}`});u(this,"peticionGet",()=>{fetch("http://localhost:3000/facturas_vendidas/factura_vendida").then(o=>o.json()).then(o=>{this.setState({data:o})}).catch(o=>{console.error("Error al obtener los datos:",o)})});u(this,"modalVer",()=>{this.setState({modalVer:!this.state.modalVer})});u(this,"handleBusquedaChange",a=>{this.setState({busqueda:a.target.value})});u(this,"seleccionarVenta",a=>{this.setState({form:{id:a.id,descripcion:a.descripcion,nombreEmpleado:a.nombreEmpleado,fecha:a.fecha,cantidad:a.cantidad,precio:a.precio,total:a.total,numeroFactura:a.numeroFactura}})});u(this,"generarInformePDF",()=>{const{fechaInicial:a,fechaFinal:o}=this.state,s=new Ye("landscape"),l=s.internal.pageSize.getWidth(),p=new Image;p.src="../../src/img/logoempresa.png",s.addImage(p,"PNG",14,14,30,10),s.setFontSize(18),s.text("Informe de Ventas",50,18),s.setFontSize(10),s.text("Empresa S.A. de C.V.",50,25),s.text("Dirección: Calle Principal #123, Ciudad, País",50,30),s.text("RFC: ABC123456789",50,35);const D=`Fecha: ${new Date().toLocaleDateString()}`;s.setFontSize(12),s.text(D,l-14-s.getTextWidth(D),18);let O=this.state.data;a&&o&&(O=this.state.data.filter(S=>{const A=new Date(S.fecha),je=new Date(a),oe=new Date(o);return A>=je&&A<=oe}));const E={};O.forEach(S=>{const A=S.nombreEmpleado;E[A]?E[A]++:E[A]=1});const b=O.map(S=>[S.numeroFactura,S.descripcion,S.nombreEmpleado,S.fecha.substring(0,10),S.cantidad,parseFloat(S.precio).toFixed(2),parseFloat(S.total).toFixed(2)]),w={headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,halign:"center",fontStyle:"bold"},bodyStyles:{textColor:50,halign:"center",fontSize:9},alternateRowStyles:{fillColor:[240,240,240]},startY:40};s.autoTable({head:[["NUMERO DE FACTURA","DESCRIPCIÓN","NOMBRE EMPLEADO","FECHA","CANTIDAD","PRECIO","TOTAL"]],body:b,...w});const v=Object.entries(E).map(([S,A])=>[S,A]),B={headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,halign:"center",fontStyle:"bold"},bodyStyles:{textColor:50,halign:"center",fontSize:9},startY:s.autoTable.previous.finalY+20};s.autoTable({head:[["NOMBRE EMPLEADO","VENTAS"]],body:v,...B});const z=b.reduce((S,A)=>(S.cantidad+=A[4],S.total+=parseFloat(A[6]),S),{cantidad:0,total:0}),F=[["Total de Unidades Vendidas",z.cantidad],["Total de Ventas",`$${z.total.toFixed(2)}`]],J={headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,halign:"center",fontStyle:"bold"},bodyStyles:{textColor:50,halign:"center",fontSize:9},startY:s.autoTable.previous.finalY+20};s.autoTable({head:[["TOTALES",""]],body:F,...J});const c={},_=[];O.forEach(S=>{const A=S.fecha.substring(0,7);c[A]?c[A]++:c[A]=1,_.push(S.fecha.substring(0,10))});const y=Object.entries(c).map(([S,A])=>[S,A]),se={headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,halign:"center",fontStyle:"bold"},bodyStyles:{textColor:50,halign:"center",fontSize:9},startY:s.autoTable.previous.finalY+20};s.autoTable({head:[["Dias trabajados por mes","Días"]],body:y,...se});const K=_.map(S=>[S]),te={headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,halign:"center",fontStyle:"bold"},bodyStyles:{textColor:50,halign:"center",fontSize:9},startY:s.autoTable.previous.finalY+20};s.autoTable({head:[["Fechas trabajadas"]],body:K,...te}),s.setFontSize(8),s.text("Términos y Condiciones: Pago contra entrega. Precios más IVA.",14,s.internal.pageSize.getHeight()-5),s.save("informe_ventas.pdf")});u(this,"handleClick",a=>{this.setState({currentPage:a})})}componentDidMount(){this.peticionGet()}render(){const{form:a,data:o,currentPage:s,itemsPerPage:l}=this.state,p=s*l,N=p-l,D=o.slice(N,p),O=[];for(let b=1;b<=Math.ceil(o.length/l);b++)O.push(b);const E=O.map(b=>e.jsx("li",{className:`page-item ${s===b?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>this.handleClick(b),children:b})},b));return e.jsxs("div",{className:"App",children:[e.jsx("br",{}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fechaInicial",children:"Fecha Inicial"}),e.jsx("input",{className:"form-control",type:"date",name:"fechaInicial",id:"fechaInicial",onChange:this.handleFechaInicialChange,value:this.state.fechaInicial})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fechaFinal",children:"Fecha Final"}),e.jsx("input",{className:"form-control",type:"date",name:"fechaFinal",id:"fechaFinal",onChange:this.handleFechaFinalChange,value:this.state.fechaFinal})]}),e.jsx(Se,{onClick:this.buscar,children:"Buscar"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(Se,{onClick:()=>this.generarInformePDF(),children:"Generar Informe PDF"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"NUMERO DE FACTURA"}),e.jsx("th",{children:"DESCRIPCION"}),e.jsx("th",{children:"NOMBRE EMPLEADO"}),e.jsx("th",{children:"FECHA"}),e.jsx("th",{children:"CANTIDAD"}),e.jsx("th",{children:"PRECIO"}),e.jsx("th",{children:"TOTAL"}),e.jsx("th",{children:"ACCIONES"})]})}),e.jsx("tbody",{children:D.map(b=>e.jsxs("tr",{children:[e.jsx("td",{children:b.numeroFactura}),e.jsx("td",{children:b.descripcion}),e.jsx("td",{children:b.nombreEmpleado}),e.jsx("td",{children:b.fecha.substring(0,10)}),e.jsx("td",{children:b.cantidad}),e.jsx("td",{children:new Intl.NumberFormat("en-EN").format(b.precio)}),e.jsx("td",{children:new Intl.NumberFormat("en-EN").format(b.total)}),e.jsx("td",{children:e.jsx(Se,{className:"btn btn-info",onClick:()=>{this.seleccionarVenta(b),this.modalVer()},children:e.jsx(ee,{icon:dt})})})]},b.numeroFactura))})]}),e.jsx("nav",{children:e.jsx("ul",{className:"pagination justify-content-center",children:E})}),e.jsxs(Z,{isOpen:this.state.modalVer,children:[e.jsx(me,{style:{display:"block"},children:e.jsx("span",{style:{float:"right"},onClick:()=>this.modalVer(),children:"x"})}),e.jsx(Q,{children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"numeroFactura",children:"NUMERO FACTURA"})," ",e.jsx("input",{className:"form-control",type:"text",name:"numeroFactura",id:"numeroFactura",readOnly:!0,value:a.numeroFactura||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"descripcion",children:"DESCRIPCION"}),e.jsx("input",{className:"form-control",type:"text",name:"descripcion",id:"descripcion",readOnly:!0,value:a.descripcion||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"nombreEmpleado",children:"NOMBRE VENDEDOR"}),e.jsx("input",{className:"form-control",type:"text",name:"nombreEmpleado",id:"nombreEmpleado",readOnly:!0,value:a.nombreEmpleado||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"fecha",children:"FECHA"}),e.jsx("input",{className:"form-control",type:"text",name:"fecha",id:"fecha",readOnly:!0,value:a.fecha||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"cantidad",children:"CANTIDAD"}),e.jsx("input",{className:"form-control",type:"number",name:"cantidad",id:"cantidad",readOnly:!0,value:a.cantidad||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"precio",children:"PRECIO"}),e.jsx("input",{className:"form-control",type:"number",name:"precio",id:"precio",readOnly:!0,value:a.precio||""}),e.jsx("br",{}),e.jsx("label",{htmlFor:"total",children:"TOTAL"}),e.jsx("input",{className:"form-control",type:"number",name:"total",id:"total",readOnly:!0,value:a.total||""})]})}),e.jsx(W,{children:e.jsx(Se,{className:"btn btn-primary",onClick:()=>this.modalVer(),children:"Cerrar"})})]})]})}}const Gt=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx(C,{to:"/venta",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Registro Ventas"})}),e.jsx("div",{className:"Avat",children:e.jsx(ae,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"tAb",children:e.jsx(Je,{})})]}),Yt=()=>{const[d,x]=m.useState([]);return m.useEffect(()=>{const a=localStorage.getItem("ventas");a&&x(JSON.parse(a))},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"nav",children:[e.jsx("img",{src:L,alt:"Logo",className:"navlg"}),e.jsx(C,{to:"/factura",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Factura"})}),e.jsx(C,{to:"/inventario",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Inventario"})}),e.jsx(C,{to:"/venta",children:e.jsx(i,{className:"BtnN",color:"success",variant:"shadow",children:"Registro Ventas"})}),e.jsx("div",{className:"Avat",children:e.jsx(ae,{})})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"tAb",children:e.jsx(Je,{ventas:d})})]})},Ht=()=>e.jsx("svg",{fill:"none",height:"36",viewBox:"0 0 32 32",width:"36",children:e.jsx("path",{clipRule:"evenodd",d:"M17.6482 10.1305L15.8785 7.02583L7.02979 22.5499H10.5278L17.6482 10.1305ZM19.8798 14.0457L18.11 17.1983L19.394 19.4511H16.8453L15.1056 22.5499H24.7272L19.8798 14.0457Z",fill:"currentColor",fillRule:"evenodd"})});function Kt(){const[d,x]=ht.useState(!1),a=["Profile","Dashboard","Activity","Analytics","System","Deployments","My Settings","Team Settings","Help & Feedback","Log Out"];return e.jsxs(mt,{onMenuOpenChange:x,children:[e.jsxs(Ue,{children:[e.jsx(ut,{"aria-label":d?"Close menu":"Open menu",className:"sm:hidden"}),e.jsxs(xt,{children:[e.jsx(Ht,{}),e.jsx("p",{className:"font-bold text-inherit",children:"ACME"})]})]}),e.jsxs(Ue,{className:"hidden sm:flex gap-4",justify:"center",children:[e.jsx(Ne,{children:e.jsx(xe,{color:"foreground",href:"#",children:"¿Necesitas ayuda?"})}),e.jsx(Ne,{isActive:!0,children:e.jsx(xe,{href:"#","aria-current":"page",children:"Customers"})}),e.jsx(Ne,{children:e.jsx(xe,{color:"foreground",href:"#",children:"Integrations"})})]}),e.jsxs(Ue,{justify:"end",children:[e.jsx(Ne,{className:"hidden lg:flex",children:e.jsx(xe,{href:"#",children:"Login"})}),e.jsx(Ne,{children:e.jsx(i,{as:xe,color:"primary",href:"#",variant:"flat",children:"Sign Up"})})]}),e.jsx(gt,{children:a.map((o,s)=>e.jsx(jt,{children:e.jsx(xe,{color:s===2?"primary":s===a.length-1?"danger":"foreground",className:"w-full",href:"#",size:"lg",children:o})},`${o}-${s}`))})]})}const Zt=({canActivate:d,RedirectPath:x="/"})=>d?e.jsx(ft,{}):e.jsx(pt,{to:x,replace:!0});function Qt(){const[d,x]=bt("user");return e.jsx(vt,{children:e.jsx(Nt,{children:e.jsxs(St,{children:[e.jsx($,{path:"/",element:e.jsx(It,{})}),e.jsx($,{path:"/login",element:e.jsx(Et,{})}),e.jsx($,{path:"/nuevousuario",element:e.jsx(Ft,{})}),e.jsx($,{path:"/registrarusuario",element:e.jsx(Dt,{})}),e.jsxs($,{element:e.jsx(Zt,{canActivate:d,RedirectPath:"/"}),children:[e.jsx($,{path:"/proveedor",element:e.jsx(Tt,{})}),e.jsx($,{path:"/inventario",element:e.jsx(wt,{})}),e.jsx($,{path:"/inventario_empleado",element:e.jsx(Lt,{})}),e.jsx($,{path:"/menuadmin",element:e.jsx(_t,{})}),e.jsx($,{path:"/menuemple",element:e.jsx(Rt,{})}),e.jsx($,{path:"/infventa",element:e.jsx(Gt,{})}),e.jsx($,{path:"/factura",element:e.jsx(kt,{})}),e.jsx($,{path:"/factura_empleado",element:e.jsx(Vt,{})}),e.jsx($,{path:"/empleados",element:e.jsx(Ut,{})}),e.jsx($,{path:"/venta",element:e.jsx(Yt,{})}),e.jsx($,{path:"/ayuda",element:e.jsx(Kt,{})})]}),e.jsx($,{path:"/contacto",element:e.jsx(Bt,{})})]})})})}const Wt=Ct(document.getElementById("root"));Wt.render(e.jsx(Qt,{}));
